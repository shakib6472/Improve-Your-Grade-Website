!function(){var e,t,a,n;e=jQuery,t={init:function(){this.cacheDOM(),this.defaultActions()},cacheDOM:function(){if(this.$wrapper=e(".vczapi-user-meeting-list"),void 0===this.$wrapper||this.$wrapper.length<1)return!1},defaultActions:function(){this.$wrapper.DataTable({responsive:!0,language:vczapi_dt_i18n})}},a={paginationHandler:function(){e(document).on("click",".vczapi-list-zoom-meetings--pagination .page-numbers",(function(t){t.preventDefault();var a=e(t.target),n=a.parents(".vczapi-list-zoom-meetings"),i=parseInt(a.text()),o=n.data(),r=1;a.hasClass("next")?(r=n.find(".vczapi-list-zoom-meetings--pagination").find(".page-numbers.current"),i=parseInt(r.next().text())):a.hasClass("prev")&&(r=n.find(".vczapi-list-zoom-meetings--pagination").find(".page-numbers.current"),i=parseInt(r.prev().text())),o.page_num=i;var c=n.find("form.vczapi-filters").serializeArray().reduce((function(e,t){return e[t.name]=t.value,e}),{});e.ajax({type:"POST",url:vczapi_ajax.ajaxurl,data:{action:"vczapi_list_meeting_shortcode_ajax_handler",data:o,form_data:c},beforeSend:function(){n.addClass("loading")},success:function(e){n.removeClass("loading"),n.find(".vczapi-items-wrap").html(e.content),n.find(".vczapi-list-zoom-meetings--pagination").html(e.pagination)},error:function(e,t,a){}})}))},filterFormSubmitHandler:function(){e("form.vczapi-filters").on("submit",(function(t){t.preventDefault();var a=e(this).parents(".vczapi-list-zoom-meetings"),n=e(this).serializeArray().reduce((function(e,t){return e[t.name]=t.value,e}),{}),i=a.data();i.page_num=1,e.ajax({type:"POST",url:vczapi_ajax.ajaxurl,data:{action:"vczapi_list_meeting_shortcode_ajax_handler",data:i,form_data:n},beforeSend:function(){a.addClass("loading")},success:function(e){a.removeClass("loading"),a.find(".vczapi-items-wrap").html(e.content),a.find(".vczapi-list-zoom-meetings--pagination").html(e.pagination)},error:function(e,t,a){}})}))},filterOnChangeHandler:function(){e("form.vczapi-filters").find("select").on("change",(function(t){t.preventDefault(),e(this).parents("form.vczapi-filters").submit()}))},eventListeners:function(){this.paginationHandler(),this.filterOnChangeHandler(),this.filterFormSubmitHandler()},init:function(){this.eventListeners()}},n={init:function(){this.cacheDOM(),this.evntHandlers()},cacheDOM:function(){this.$recordingsDatePicker=e(".vczapi-check-recording-date")},evntHandlers:function(){e(document).on("click",".vczapi-view-recording",this.openModal.bind(this)),e(document).on("click",".vczapi-modal-close",this.closeModal.bind(this)),e(".vczapi-recordings-list-table").length>0&&e(".vczapi-recordings-list-table").DataTable({responsive:!0,language:vczapi_dt_i18n,order:[3,"desc"],columnDefs:[{orderable:!1,targets:[2,5]}]}),e(this.$recordingsDatePicker).length>0&&this.$recordingsDatePicker.datepicker({changeMonth:!0,changeYear:!0,showButtonPanel:!0,dateFormat:"MM yy",beforeShow:function(t,a){setTimeout((function(){a.dpDiv.css({top:e(".vczapi-check-recording-date").offset().top+35,left:e(".vczapi-check-recording-date").offset().left})}),0)}}).focus((function(){var t=e(this);e(".ui-datepicker-calendar").detach(),e(".ui-datepicker-close").click((function(){var a=e("#ui-datepicker-div .ui-datepicker-month :selected").val(),n=e("#ui-datepicker-div .ui-datepicker-year :selected").val();t.datepicker("setDate",new Date(n,a,1))}))}))},closeModal:function(t){t.preventDefault(),e(".vczapi-modal-content").remove(),e(".vczapi-modal").hide()},openModal:function(t){t.preventDefault();var a={recording_id:e(t.currentTarget).data("recording-id"),action:"get_recording",downloadable:e(t.currentTarget).data("downloadable")};e(".vczapi-modal").html('<p class="vczapi-modal-loader">'+vczapi_ajax.loading_recordings+"</p>").show(),e.get(vczapi_ajax.ajaxurl,a).done((function(t){e(".vczapi-modal").html(t.data).show()}))}},e((function(){a.init(),t.init(),n.init()}));const i=(()=>{let e={};return{init:()=>{e.domElement=document.querySelectorAll(".vczapi-recordings-by-meeting-id"),null!==e.domElement&&e.domElement.length>0&&e.domElement.forEach((e=>{(e=>{let{meeting:t,loading:a,passcode:n,downloadable:i}=e.dataset;e.innerHTML=a,fetch(vczapi_ajax.ajaxurl+`?action=getRecordingByMeetingID&meeting_id=${t}&passcode=${n}&downloadable=${i}`).then((e=>e.json())).then((t=>{e.innerHTML=t.data}))})(e)}))}}})();document.addEventListener("DOMContentLoaded",(()=>{i.init()}))}();